
Navigation Menu

Code
Issues
Pull requests
Build Boost, talloc, proot for Android ARM64 (self-healing, robust, multi-strategy)
Update boost-armv8-clang.yml #175
Annotations
1 error and 1 warning
build-all
failed 3 minutes ago in 4m 17s
1s
0s
11s
0s
31s
0s
7s
0s
10s
2m 45s
3s
2s
18s
Run set -xe
  set -xe
  cd talloc-2.4.2
  
  # 1. Автоматический поиск, создание и восстановление директорий и файлов
  ensure_dir() { [ -d "$1" ] || (echo "Создаём директорию $1"; mkdir -p "$1"); }
  ensure_file() { [ -f "$1" ] || (echo "Ищу $1 в интернете..."; wget -nv "$2" -O "$1" || echo "Не найден $1 в сети"); }
  search_file() { find . -type f -name "$1" | head -1; }
  
  # Попытка найти или создать install/lib и include
  ensure_dir install
  ensure_dir install/lib
  ensure_dir install/include
  
  # Попытка найти configure, autogen.sh, Makefile.am
  if [ ! -f configure ]; then
    echo "[INFO] configure отсутствует, ищем autogen.sh или Makefile.am..."
    if [ -f autogen.sh ]; then
      chmod +x autogen.sh
      ./autogen.sh
    elif [ -f Makefile.am ]; then
      (command -v autoreconf && autoreconf -i) || true
    else
      echo "[WARN] configure и autogen.sh не найдены, пробую скачать исходники talloc заново"
      wget https://www.samba.org/ftp/talloc/talloc-2.4.2.tar.gz -O talloc-repair.tar.gz && tar -xf talloc-repair.tar.gz --strip-components=1
    fi
  fi
  
  # Попытка автозаполнения отсутствующих файлов из waf/waflib, если вдруг выбран waf
  if [ ! -f waf ] && [ -f configure ]; then
    ./configure --disable-python --without-gettext --prefix="$PWD/install" || true
  fi
  
  # 2. Основная попытка: autotools (рекомендуется для Android)
  export ANDROID_API=21
  export NDK_HOME="$HOME/android-ndk"
  export TOOLCHAIN="$NDK_HOME/toolchains/llvm/prebuilt/linux-x86_64/bin"
  export SYSROOT="$NDK_HOME/toolchains/llvm/prebuilt/linux-x86_64/sysroot"
  export CC="$TOOLCHAIN/aarch64-linux-android$ANDROID_API-clang"
  export AR="$TOOLCHAIN/llvm-ar"
  export RANLIB="$TOOLCHAIN/llvm-ranlib"
  export CFLAGS="--target=aarch64-linux-android$ANDROID_API --sysroot=$SYSROOT -fPIC -DANDROID"
  export LDFLAGS="--target=aarch64-linux-android$ANDROID_API --sysroot=$SYSROOT -fPIC"
  
  echo "==== Попытка 1: autotools configure/make ===="
  ([ -f autogen.sh ] && ./autogen.sh) || true
  
  ./configure --disable-python --without-gettext --host=aarch64-linux-android --prefix="$PWD/install" CC="$CC" AR="$AR" RANLIB="$RANLIB" CFLAGS="$CFLAGS" LDFLAGS="$LDFLAGS" || export AUTOTOOLS_FAILED=1
  if [ ! "$AUTOTOOLS_FAILED" = "1" ]; then
    make -j$(nproc) || export MAKE_FAILED=1
    if [ ! "$MAKE_FAILED" = "1" ]; then
      make install
    fi
  fi
  
  # 3. Альтернатива: waf, если он был сгенерирован корректно
  if [ "$AUTOTOOLS_FAILED" = "1" ] || [ "$MAKE_FAILED" = "1" ]; then
    echo "==== Попытка 2: waf (если waf сгенерирован корректно) ===="
    if [ -f waf ]; then
      chmod +x waf
      ./waf configure --disable-python --without-gettext --prefix="$PWD/install" CC="$CC" AR="$AR" RANLIB="$RANLIB" CFLAGS="$CFLAGS" LDFLAGS="$LDFLAGS" || export WAF_FAILED=1
      if [ ! "$WAF_FAILED" = "1" ]; then
        ./waf build -v
        ./waf install
      fi
    fi
  fi
  
  # 4. Альтернатива: ручная компиляция, если autotools и waf не сработали
  if [ "$AUTOTOOLS_FAILED" = "1" ] && ([ "$WAF_FAILED" = "1" ] || [ ! -f waf ]); then
    echo "==== Попытка 3: ручная компиляция ===="
    SRC=$(search_file "talloc.c")
    HDR=$(search_file "talloc.h")
    if [ -n "$SRC" ] && [ -n "$HDR" ]; then
      $CC $CFLAGS -c "$SRC" -o talloc.o
      ar rcs libtalloc.a talloc.o
      cp libtalloc.a install/lib/
      cp "$HDR" install/include/
      echo "talloc собран вручную"
    else
      echo "Не нашёл talloc.c или talloc.h для ручной сборки!"
      exit 1
    fi
  fi
  
  # 5. Проверка и логирование результата
  echo "==== install/include ===="
  ls -al install/include || true
  echo "==== install/lib ===="
  ls -al install/lib || true
  if [ ! -f install/lib/libtalloc.a ] && [ ! -f install/lib/libtalloc.so ]; then
    echo "::error::talloc не собрался ни одним способом!"
    exit 1
  else
    echo "talloc успешно собран и установлен."
  fi
  shell: /usr/bin/bash -e {0}
  env:
    ANDROID_NDK_HOME: /home/runner/android-ndk
    PATH: /home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin:/snap/bin:/home/runner/.local/bin:/opt/pipx_bin:/home/runner/.cargo/bin:/home/runner/.config/composer/vendor/bin:/usr/local/.ghcup/bin:/home/runner/.dotnet/tools:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
+ cd talloc-2.4.2
+ ensure_dir install
+ '[' -d install ']'
+ echo 'Создаём директорию install'
Создаём директорию install
+ mkdir -p install
+ ensure_dir install/lib
+ '[' -d install/lib ']'
+ echo 'Создаём директорию install/lib'
Создаём директорию install/lib
+ mkdir -p install/lib
+ ensure_dir install/include
+ '[' -d install/include ']'
+ echo 'Создаём директорию install/include'
Создаём директорию install/include
+ mkdir -p install/include
+ '[' '!' -f configure ']'
+ '[' '!' -f waf ']'
+ '[' -f configure ']'
+ ./configure --disable-python --without-gettext --prefix=/home/runner/work/boost-armv8-build/boost-armv8-build/talloc-2.4.2/install
Setting top to                           : /home/runner/work/boost-armv8-build/boost-armv8-build/talloc-2.4.2 
Setting out to                           : /home/runner/work/boost-armv8-build/boost-armv8-build/talloc-2.4.2/bin 
Checking for 'gcc' (C compiler)          : /usr/bin/gcc 
Checking for program 'git'               : /usr/bin/git 
Checking for c flags '-MMD'              : yes 
Checking for program 'gdb'               : not found 
Checking for header sys/utsname.h        : yes 
Checking uname sysname type              : Linux 
Checking uname machine type              : x86_64 
Checking uname release type              : 6.8.0-1027-azure 
Checking uname version type              : #32~22.04.1-Ubuntu SMP Thu Apr  3 20:26:27 UTC 2025 
Checking for header stdio.h              : yes 
Checking simple C program                : ok 
Checking compiler accepts ['-Werror']    : yes 
Checking linker accepts ['-Wl,-rpath,.'] : yes 
Checking for rpath library support       : yes 
Checking for -Wl,--version-script support : yes 
Checking compiler accepts ['-fvisibility=hidden'] : yes 
Checking for HAVE_VISIBILITY_ATTR                 : ok 
Checking for library constructor support          : ok 
Checking for library destructor support           : ok 
Checking for __attribute__                        : ok 
Checking compiler accepts ['-fPIC']               : yes 
Checking for inline                               : inline 
Checking for program 'pkg-config'                 : /usr/bin/pkg-config 
Checking for pkg-config version >= '0.0.0'        : yes 
Checking compiler accepts ['-D__STDC_WANT_LIB_EXT1__=1'] : yes 
Checking compiler accepts ['']                           : yes 
Checking for header sys/types.h                          : yes 
Checking for header sys/stat.h                           : yes 
Checking for header stdlib.h                             : yes 
Checking for header stddef.h                             : yes 
Checking for header memory.h                             : yes 
Checking for header string.h                             : yes 
Checking for header strings.h                            : yes 
Checking for header inttypes.h                           : yes 
Checking for header stdint.h                             : yes 
Checking for header unistd.h                             : yes 
Checking for header minix/config.h                       : no 
Checking for header ctype.h                              : yes 
Checking for header standards.h                          : no 
Checking for header stdbool.h                            : yes 
Checking for header stdarg.h                             : yes 
Checking for header vararg.h                             : no 
Checking for header limits.h                             : yes 
Checking for header assert.h                             : yes 
Checking getconf LFS_CFLAGS                              : not found 
Checking getconf large file support flags work           : ok 
Checking for large file support without additional flags : ok 
Checking for header sys/time.h                           : yes 
Checking for header time.h                               : yes 
Checking for header endian.h                             : yes 
Checking for header sys/endian.h                         : no 
Checking for HAVE_LITTLE_ENDIAN                          : ok 
Checking for HAVE_BIG_ENDIAN                             : not found 
Checking for header signal.h                             : yes 
Checking if signal handlers return int                   : not found 
Checking for variable __FUNCTION__                       : ok 
Checking for va_copy                                     : ok 
Checking for header linux/types.h                        : yes 
Checking for header crypt.h                              : yes 
Checking for header locale.h                             : yes 
Checking for header acl/libacl.h                         : no 
Checking for header compat.h                             : no 
Checking for header attr/xattr.h                         : no 
Checking for header dustat.h                             : no 
Checking for header fcntl.h                              : yes 
Checking for header fnmatch.h                            : yes 
Checking for header glob.h                               : yes 
Checking for header history.h                            : no 
Checking for header krb5.h                               : no 
Checking for header langinfo.h                           : yes 
Checking for header ndir.h                               : no 
Checking for header pwd.h                                : yes 
Checking for header shadow.h                             : yes 
Checking for header sys/acl.h                            : no 
Checking for header sys/attributes.h                     : no 
Checking for header attr/attributes.h                    : no 
Checking for header sys/capability.h                     : no 
Checking for header sys/dir.h                            : yes 
Checking for header sys/epoll.h                          : yes 
Checking for header sys/fcntl.h                          : yes 
Checking for header sys/filio.h                          : no 
Checking for header sys/filsys.h                         : no 
Checking for header sys/fs/s5param.h                     : no 
Checking for header sys/id.h                             : no 
Checking for header sys/ioctl.h                          : yes 
Checking for header sys/ipc.h                            : yes 
Checking for header sys/mman.h                           : yes 
Checking for header sys/mode.h                           : no 
Checking for header sys/ndir.h                           : no 
Checking for header sys/priv.h                           : no 
Checking for header sys/resource.h                       : yes 
Checking for header sys/security.h                       : no 
Checking for header sys/shm.h                            : yes 
Checking for header sys/statfs.h                         : yes 
Checking for header sys/statvfs.h                        : yes 
Checking for header sys/termio.h                         : no 
Checking for header sys/vfs.h                            : yes 
Checking for header sys/xattr.h                          : yes 
Checking for header termio.h                             : yes 
Checking for header termios.h                            : yes 
Checking for header sys/file.h                           : yes 
Checking for header sys/ucontext.h                       : yes 
Checking for header sys/wait.h                           : yes 
Checking for declaration of malloc                       : ok 
Checking for header grp.h                                : yes 
Checking for header sys/select.h                         : yes 
Checking for header setjmp.h                             : yes 
Checking for header utime.h                              : yes 
Checking for header sys/syslog.h                         : yes 
Checking for header syslog.h                             : yes 
Checking for header sys/mount.h                          : yes 
Checking for header mntent.h                             : yes 
Checking for header stropts.h                            : no 
Checking for header unix.h                               : no 
Checking for header sys/param.h                          : yes 
Checking for header sys/socket.h                         : yes 
Checking for header netinet/in.h                         : yes 
Checking for header netdb.h                              : yes 
Checking for header arpa/inet.h                          : yes 
Checking for header netinet/in_systm.h                   : yes 
Checking for header netinet/ip.h                         : yes 
Checking for header netinet/tcp.h                        : yes 
Checking for header netinet/in_ip.h                      : no 
Checking for header sys/sockio.h                         : no 
Checking for header sys/un.h                             : yes 
Checking for header sys/uio.h                            : yes 
Checking for header ifaddrs.h                            : yes 
Checking for header direct.h                             : no 
Checking for header dirent.h                             : yes 
Checking for header windows.h                            : no 
Checking for header winsock2.h                           : no 
Checking for header ws2tcpip.h                           : no 
Checking for header errno.h                              : yes 
Checking for header getopt.h                             : yes 
Checking for header iconv.h                              : yes 
Checking for header nss.h                                : yes 
Checking for header sasl/sasl.h                          : no 
Checking for header linux/openat2.h                      : yes 
Checking for inotify_init                                : ok 
Checking for header security/pam_appl.h                  : no 
Checking for header zlib.h                               : yes 
Checking for header asm/unistd.h                         : yes 
Checking for header sys/unistd.h                         : yes 
Checking for header alloca.h                             : yes 
Checking for header float.h                              : yes 
Checking for header rpc/rpc.h                            : no 
Checking for header rpc/nettype.h                        : no 
Checking for tirpc rpc headers in default system path    : not found 
Checking for libtirpc headers                            : yes 
Checking for header rpc/rpc.h                            : yes 
Checking for header rpc/nettype.h                        : yes 
Checking for header sys/sysctl.h                         : not found 
Checking for header sys/fileio.h                         : no 
Checking for header sys/filesys.h                        : no 
Checking for header sys/dustat.h                         : no 
Checking for header sys/sysmacros.h                      : yes 
Checking for header xfs/libxfs.h                         : no 
Checking for header netgroup.h                           : no 
Checking for header valgrind.h                           : no 
Checking for header valgrind/valgrind.h                  : no 
Checking for header valgrind/memcheck.h                  : no 
Checking for header valgrind/helgrind.h                  : no 
Checking for header valgrind/callgrind.h                 : no 
Checking for header nss_common.h                         : no 
Checking for header nsswitch.h                           : no 
Checking for header ns_api.h                             : no 
Checking for header sys/extattr.h                        : no 
Checking for header sys/ea.h                             : no 
Checking for header sys/proplist.h                       : no 
Checking for header sys/cdefs.h                          : yes 
Checking for header utmp.h                               : yes 
Checking for header utmpx.h                              : yes 
Checking for header lastlog.h                            : yes 
Checking for header syscall.h                            : yes 
Checking for header sys/syscall.h                        : yes 
Checking for header sys/atomic.h                         : no 
Checking for header stdatomic.h                          : yes 
Checking for header libgen.h                             : yes 
Checking compiler accepts -Wno-format-truncation         : yes 
Checking compiler accepts -Wno-unused-function           : yes 
Checking compiler accepts -Wno-strict-overflow           : yes 
Checking compiler accepts -Wno-unused-but-set-variable   : yes 
Checking compiler accepts -Wuse-after-free=1             : no 
Checking for header sys/prctl.h                          : yes 
Checking for prctl syscall                               : ok 
Checking for O_DIRECT flag to open(2)                    : ok 
Checking for long long                                   : ok 
Checking for intptr_t                                    : ok 
Checking for uintptr_t                                   : ok 
Checking for ptrdiff_t                                   : ok 
Checking for comparison_fn_t                             : ok 
Checking for bool                                        : ok 
Checking for int8_t                                      : ok 
Checking for uint8_t                                     : ok 
Checking for int16_t                                     : ok 
Checking for uint16_t                                    : ok 
Checking for int32_t                                     : ok 
Checking for uint32_t                                    : ok 
Checking for int64_t                                     : ok 
Checking for uint64_t                                    : ok 
Checking for size_t                                      : ok 
Checking for ssize_t                                     : ok 
Checking for ino_t                                       : ok 
Checking for loff_t                                      : ok 
Checking for offset_t                                    : not found 
Checking for volatile int                                : ok 
Checking for uint_t                                      : not found 
Checking for blksize_t                                   : ok 
Checking for blkcnt_t                                    : ok 
Checking if size of bool == 1                            : ok 
Checking if size of char == 1                            : ok 
Checking if size of int == 1                             : not found 
Checking if size of int == 2                             : not found 
Checking if size of int == 4                             : ok 
Checking if size of long long == 1                       : not found 
Checking if size of long long == 2                       : not found 
Checking if size of long long == 4                       : not found 
Checking if size of long long == 8                       : ok 
Checking if size of long == 1                            : not found 
Checking if size of long == 2                            : not found 
Checking if size of long == 4                            : not found 
Checking if size of long == 8                            : ok 
Checking if size of short == 1                           : not found 
Checking if size of short == 2                           : ok 
Checking if size of size_t == 1                          : not found 
Checking if size of size_t == 2                          : not found 
Checking if size of size_t == 4                          : not found 
Checking if size of size_t == 8                          : ok 
Checking if size of ssize_t == 1                         : not found 
Checking if size of ssize_t == 2                         : not found 
Checking if size of ssize_t == 4                         : not found 
Checking if size of ssize_t == 8                         : ok 
Checking if size of int8_t == 1                          : ok 
Checking if size of uint8_t == 1                         : ok 
Checking if size of int16_t == 1                         : not found 
Checking if size of int16_t == 2                         : ok 
Checking if size of uint16_t == 1                        : not found 
Checking if size of uint16_t == 2                        : ok 
Checking if size of int32_t == 1                         : not found 
Checking if size of int32_t == 2                         : not found 
Checking if size of int32_t == 4                         : ok 
Checking if size of uint32_t == 1                        : not found 
Checking if size of uint32_t == 2                        : not found 
Checking if size of uint32_t == 4                        : ok 
Checking if size of int64_t == 1                         : not found 
Checking if size of int64_t == 2                         : not found 
Checking if size of int64_t == 4                         : not found 
Checking if size of int64_t == 8                         : ok 
Checking if size of uint64_t == 1                        : not found 
Checking if size of uint64_t == 2                        : not found 
Checking if size of uint64_t == 4                        : not found 
Checking if size of uint64_t == 8                        : ok 
Checking if size of void* == 1                           : not found 
Checking if size of void* == 2                           : not found 
Checking if size of void* == 4                           : not found 
Checking if size of void* == 8                           : ok 
Checking if size of off_t == 1                           : not found 
Checking if size of off_t == 2                           : not found 
Checking if size of off_t == 4                           : not found 
Checking if size of off_t == 8                           : ok 
Checking if size of dev_t == 1                           : not found 
Checking if size of dev_t == 2                           : not found 
Checking if size of dev_t == 4                           : not found 
Checking if size of dev_t == 8                           : ok 
Checking if size of ino_t == 1                           : not found 
Checking if size of ino_t == 2                           : not found 
Checking if size of ino_t == 4                           : not found 
Checking if size of ino_t == 8                           : ok 
Checking if size of time_t == 1                          : not found 
Checking if size of time_t == 2                          : not found 
Checking if size of time_t == 4                          : not found 
Checking if size of time_t == 8                          : ok 
Checking for socklen_t                                   : ok 
Checking for struct ifaddrs                              : ok 
Checking for struct addrinfo                             : ok 
Checking for struct sockaddr                             : ok 
Checking for HAVE_STRUCT_SOCKADDR_IN6                    : ok 
Checking for struct sockaddr_storage                     : ok 
Checking for sa_family_t                                 : ok 
Checking for sig_atomic_t                                : ok 
Checking for sigsetmask                                  : ok 
Checking for siggetmask                                  : ok 
Checking for sigprocmask                                 : ok 
Checking for sigblock                                    : ok 
Checking for sigaction                                   : ok 
Checking for sigset                                      : ok 
Checking for inet_ntoa                                   : ok 
Checking for inet_aton                                   : ok 
Checking for inet_ntop                                   : ok 
Checking for inet_pton                                   : ok 
Checking for connect                                     : ok 
Checking for gethostbyname                               : ok 
Checking for getaddrinfo                                 : ok 
Checking for getnameinfo                                 : ok 
Checking for freeaddrinfo                                : ok 
Checking for gai_strerror                                : ok 
Checking for socketpair                                  : ok 
Checking for memset_s                                    : not found 
Checking for memset_explicit                             : not found 
Checking for volatile memory protection                  : ok 
Checking for variable IPV6_V6ONLY                        : ok 
Checking for header net/if.h                             : yes 
Checking for HAVE_IPV6                                   : ok 
Checking whether we have ucontext_t                      : ok 
Checking for __sync_fetch_and_add compiler builtin       : ok 
Checking for __sync_add_and_fetch compiler builtin       : ok 
Checking for atomic_add_32 compiler builtin              : not found 
Checking for __atomic_add_fetch compiler builtin         : ok 
Checking for __atomic_load compiler builtin              : ok 
Checking for atomic_thread_fence(memory_order_seq_cst) in stdatomic.h : ok 
Checking for fallthrough attribute                                    : ok 
Checking for strdup                                                   : ok 
Checking for memmem                                                   : ok 
Checking for printf                                                   : ok 
Checking for memset                                                   : ok 
Checking for memcpy                                                   : ok 
Checking for memmove                                                  : ok 
Checking for strcpy                                                   : ok 
Checking for strncpy                                                  : ok 
Checking for bzero                                                    : ok 
Checking for shl_load                                                 : not found 
Checking for shl_unload                                               : not found 
Checking for shl_findsym                                              : not found 
Checking for pipe                                                     : ok 
Checking for strftime                                                 : ok 
Checking for srandom                                                  : ok 
Checking for random                                                   : ok 
Checking for srand                                                    : ok 
Checking for rand                                                     : ok 
Checking for usleep                                                   : ok 
Checking for setbuffer                                                : ok 
Checking for lstat                                                    : ok 
Checking for getpgrp                                                  : ok 
Checking for utime                                                    : ok 
Checking for utimes                                                   : ok 
Checking for setuid                                                   : ok 
Checking for seteuid                                                  : ok 
Checking for setreuid                                                 : ok 
Checking for setresuid                                                : ok 
Checking for setgid                                                   : ok 
Checking for setegid                                                  : ok 
Checking for setregid                                                 : ok 
Checking for setresgid                                                : ok 
Checking for chroot                                                   : ok 
Checking for strerror                                                 : ok 
Checking for vsyslog                                                  : ok 
Checking for setlinebuf                                               : ok 
Checking for mktime                                                   : ok 
Checking for ftruncate                                                : ok 
Checking for chsize                                                   : not found 
Checking for rename                                                   : ok 
Checking for waitpid                                                  : ok 
Checking for wait4                                                    : ok 
Checking for initgroups                                               : ok 
Checking for pread                                                    : ok 
Checking for pwrite                                                   : ok 
Checking for strndup                                                  : ok 
Checking for strcasestr                                               : ok 
Checking for strsep                                                   : ok 
Checking for strtok_r                                                 : ok 
Checking for mkdtemp                                                  : ok 
Checking for dup2                                                     : ok 
Checking for dprintf                                                  : ok 
Checking for vdprintf                                                 : ok 
Checking for isatty                                                   : ok 
Checking for chown                                                    : ok 
Checking for lchown                                                   : ok 
Checking for link                                                     : ok 
Checking for readlink                                                 : ok 
Checking for symlink                                                  : ok 
Checking for realpath                                                 : ok 
Checking for snprintf                                                 : ok 
Checking for vsnprintf                                                : ok 
Checking for asprintf                                                 : ok 
Checking for vasprintf                                                : ok 
Checking for setenv                                                   : ok 
Checking for unsetenv                                                 : ok 
Checking for strnlen                                                  : ok 
Checking for strtoull                                                 : ok 
Checking for __strtoull                                               : not found 
Checking for strtouq                                                  : ok 
Checking for strtoll                                                  : ok 
Checking for __strtoll                                                : not found 
Checking for strtoq                                                   : ok 
Checking for memalign                                                 : ok 
Checking for posix_memalign                                           : ok 
Checking for fmemopen                                                 : ok 
Checking for header malloc.h                                          : yes 
Checking for declaration of memalign                                  : ok 
Checking for posix_fallocate-capable libc                             : ok 
Checking for posix_fallocate                                          : ok 
Checking for prctl                                                    : ok 
Checking for dirname                                                  : ok 
Checking for basename                                                 : ok 
Checking for strlcpy                                                  : not found 
Checking for strlcat                                                  : not found 
Checking for strlcpy                                                  : not found 
Checking for strlcat                                                  : not found 
Checking for library bsd                                              : no 
Checking for strlcpy                                                  : not found 
Checking for strlcat                                                  : not found 
Checking for getpeereid                                               : not found 
Checking for library bsd                                              : no 
Checking for getpeereid                                               : not found 
Checking for library setproctitle                                     : no 
Checking for setproctitle                                             : not found 
Checking for library bsd                                              : no 
Checking for setproctitle                                             : not found 
Checking for setproctitle_init                                        : not found 
Checking for library bsd                                              : no 
Checking for setproctitle_init                                        : not found 
Checking for closefrom                                                : ok 
Checking whether we can use SO_PEERCRED to get socket credentials     : ok 
Checking correct behavior of strtoll                                  : not found 
Checking for if_nameindex                                             : ok 
Checking for if_nametoindex                                           : ok 
Checking for strerror_r                                               : ok 
Checking for syslog                                                   : ok 
Checking for gai_strerror                                             : ok 
Checking for get_current_dir_name                                     : ok 
Checking for timegm                                                   : ok 
Checking for getifaddrs                                               : ok 
Checking for freeifaddrs                                              : ok 
Checking for mmap                                                     : ok 
Checking for setgroups                                                : ok 
Checking for syscall                                                  : ok 
Checking for setsid                                                   : ok 
Checking for getgrent_r                                               : ok 
Checking for getgrgid_r                                               : ok 
Checking for getgrnam_r                                               : ok 
Checking for getgrouplist                                             : ok 
Checking for getpagesize                                              : ok 
Checking for getpwent_r                                               : ok 
Checking for getpwnam_r                                               : ok 
Checking for getpwuid_r                                               : ok 
Checking for epoll_create1                                            : ok 
Checking for getprogname                                              : not found 
Checking for copy_file_range                                          : ok 
Checking for getxattr                                                 : ok 
Checking whether xattr interface takes additional options             : not found 
Checking for dlopen                                                   : ok 
Checking for dlsym                                                    : ok 
Checking for dlerror                                                  : ok 
Checking for dlclose                                                  : ok 
Checking for declaration of dlopen                                    : ok 
Checking C prototype for dlopen                                       : not found 
Checking for fdatasync                                                : ok 
Checking for declaration of fdatasync                                 : ok 
Checking for clock_gettime                                            : ok 
Checking whether the clock_gettime clock ID CLOCK_MONOTONIC is available : ok 
Checking whether the clock_gettime clock ID CLOCK_PROCESS_CPUTIME_ID is available : ok 
Checking whether the clock_gettime clock ID CLOCK_REALTIME is available           : ok 
Checking for struct timespec                                                      : ok 
Checking for header arpa/nameser.h                                                : yes 
Checking for header resolv.h                                                      : yes 
Checking for res_search                                                           : ok 
Checking for pthread_create                                                       : ok 
Checking for pthread_attr_init                                                    : ok 
Checking for pthread_mutexattr_setrobust                                          : ok 
Checking for declaration of PTHREAD_MUTEX_ROBUST                                  : not found 
Checking for declaration of PTHREAD_MUTEX_ROBUST (as enum)                        : ok 
Checking for pthread_mutex_consistent                                             : ok 
Checking for __thread local storage                                               : ok 
Checking for crypt                                                                : not found 
Checking for library crypt                                                        : yes 
Checking for crypt in crypt                                                       : ok 
Checking for crypt_r                                                              : not found 
Checking for crypt_r in crypt                                                     : ok 
Checking for crypt_rn                                                             : not found 
Checking for crypt_rn in crypt                                                    : ok 
Checking for header readline.h                                                    : no 
Checking for header readline/readline.h                                           : yes 
Checking for header readline/history.h                                            : yes 
Checking for variable rl_event_hook                                               : ok 
Checking for variable program_invocation_short_name                               : ok 
Checking for declaration of snprintf                                              : ok 
Checking for declaration of vsnprintf                                             : ok 
Checking for declaration of asprintf                                              : ok 
Checking for declaration of vasprintf                                             : ok 
Checking for declaration of errno                                                 : ok 
Checking for declaration of EWOULDBLOCK                                           : ok 
Checking for declaration of environ                                               : ok 
Checking for declaration of getgrent_r                                            : ok 
Checking for declaration of getpwent_r                                            : ok 
Checking for declaration of pread                                                 : ok 
Checking for declaration of pwrite                                                : ok 
Checking for declaration of setenv                                                : ok 
Checking for declaration of setresgid                                             : ok 
Checking for declaration of setresuid                                             : ok 
Checking for eventfd                                                              : ok 
Checking for header poll.h                                                        : yes 
Checking for poll                                                                 : ok 
Checking for strptime                                                             : ok 
Checking for declaration of strptime                                              : ok 
Checking for working strptime                                                     : ok 
Checking for declaration of gettimeofday                                          : ok 
Checking C prototype for gettimeofday                                             : not found 
Checking C prototype for gettimeofday                                             : ok 
Checking for C99 vsnprintf                                                        : ok 
Checking for HAVE_SHARED_MMAP                                                     : ok 
Checking for HAVE_MREMAP                                                          : ok 
Checking for HAVE_INCOHERENT_MMAP                                                 : not found 
Checking for HAVE_IMMEDIATE_STRUCTURES                                            : ok 
Checking for HAVE_MKDIR_MODE                                                      : ok 
Checking for member st_rdev in struct stat                                        : ok 
Checking for member st_rdev in struct stat                                        : ok 
Checking for member ss_family in struct sockaddr_storage                          : ok 
Checking for member __ss_family in struct sockaddr_storage                        : not found 
Checking for member sa_len in struct sockaddr                                     : not found 
Checking for member sin_len in struct sockaddr_in                                 : not found 
Checking for member sin6_len in struct sockaddr_in6                               : not found 
Checking for HAVE_UNIXSOCKET                                                      : ok 
Checking for HAVE_SECURE_MKSTEMP                                                  : ok 
Checking for HAVE_IFACE_GETIFADDRS                                                : not found 
Checking for HAVE_IFACE_AIX                                                       : not found 
Checking for HAVE_IFACE_IFCONF                                                    : not found 
Checking for HAVE_IFACE_IFREQ                                                     : not found 
Checking for declaration of getpwent_r                                            : ok 
Checking C prototype for getpwent_r                                               : not found 
Checking for declaration of getgrent_r                                            : ok 
Checking C prototype for getgrent_r                                               : not found 
Checking C prototype for getpwent_r                                               : not found 
Checking C prototype for getgrent_r                                               : not found 
Checking for strerror_r                                                           : ok 
Checking for XSI (rather than GNU) prototype for strerror_r                       : not found 
Checking for program 'xsltproc'                                                   : not found 
Checking for header sys/auxv.h                                                    : yes 
Checking for getauxval                                                            : ok 
Checking if compiler accepts -fstack-protector-strong                             : yes 
Checking if compiler accepts -fstack-clash-protection                             : yes 
Checking linker accepts -Wl,-no-undefined                                         : yes 
Checking linker accepts ['-undefined', 'dynamic_lookup']                          : no 
Checking for program 'python3'                                                    : /usr/bin/python3 
Checking for program 'python'                                                     : /usr/bin/python3 
Checking for program 'python3'                                                    : /usr/bin/python3 
Checking for python version >= 3.6.0                                              : 3.10.12 
python headers                                                                    : Check disabled due to --disable-python 
'configure' finished successfully (17.792s)
+ export ANDROID_API=21
+ ANDROID_API=21
+ export NDK_HOME=/home/runner/android-ndk
+ NDK_HOME=/home/runner/android-ndk
+ export TOOLCHAIN=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin
+ TOOLCHAIN=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin
+ export SYSROOT=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot
+ SYSROOT=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot
+ export CC=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android21-clang
+ CC=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android21-clang
+ export AR=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/llvm-ar
+ AR=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/llvm-ar
+ export RANLIB=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/llvm-ranlib
+ RANLIB=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/llvm-ranlib
+ export 'CFLAGS=--target=aarch64-linux-android21 --sysroot=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot -fPIC -DANDROID'
+ CFLAGS='--target=aarch64-linux-android21 --sysroot=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot -fPIC -DANDROID'
+ export 'LDFLAGS=--target=aarch64-linux-android21 --sysroot=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot -fPIC'
+ LDFLAGS='--target=aarch64-linux-android21 --sysroot=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot -fPIC'
+ echo '==== Попытка 1: autotools configure/make ===='
+ '[' -f autogen.sh ']'
+ true
+ ./configure --disable-python --without-gettext --host=aarch64-linux-android --prefix=/home/runner/work/boost-armv8-build/boost-armv8-build/talloc-2.4.2/install CC=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android21-clang AR=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/llvm-ar RANLIB=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/llvm-ranlib 'CFLAGS=--target=aarch64-linux-android21 --sysroot=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot -fPIC -DANDROID' 'LDFLAGS=--target=aarch64-linux-android21 --sysroot=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot -fPIC'
==== Попытка 1: autotools configure/make ====
Setting top to                           : /home/runner/work/boost-armv8-build/boost-armv8-build/talloc-2.4.2 
Setting out to                           : /home/runner/work/boost-armv8-build/boost-armv8-build/talloc-2.4.2/bin 
Checking for 'gcc' (C compiler)          : not found 
Checking for 'clang' (C compiler)        : /home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android21-clang 
Checking for program 'git'               : /usr/bin/git 
Checking for c flags '-MMD'              : yes 
Checking for program 'gdb'               : not found 
Checking for header sys/utsname.h        : yes 
Checking uname sysname type              : not found 
Checking uname machine type              : not found 
Checking uname release type              : not found 
Checking uname version type              : not found 
Checking for header stdio.h              : yes 
Checking simple C program                : not found 
The configuration failed
(complete log in /home/runner/work/boost-armv8-build/boost-armv8-build/talloc-2.4.2/bin/config.log)
+ export AUTOTOOLS_FAILED=1
+ AUTOTOOLS_FAILED=1
+ '[' '!' 1 = 1 ']'
+ '[' 1 = 1 ']'
+ echo '==== Попытка 2: waf (если waf сгенерирован корректно) ===='
==== Попытка 2: waf (если waf сгенерирован корректно) ====
+ '[' -f waf ']'
+ '[' 1 = 1 ']'
+ '[' '' = 1 ']'
+ '[' '!' -f waf ']'
+ echo '==== Попытка 3: ручная компиляция ===='
==== Попытка 3: ручная компиляция ====
++ search_file talloc.c
++ find . -type f -name talloc.c
++ head -1
+ SRC=./talloc.c
++ search_file talloc.h
++ find . -type f -name talloc.h
++ head -1
+ HDR=./talloc.h
+ '[' -n ./talloc.c ']'
+ '[' -n ./talloc.h ']'
+ /home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/bin/aarch64-linux-android21-clang --target=aarch64-linux-android21 --sysroot=/home/runner/android-ndk/toolchains/llvm/prebuilt/linux-x86_64/sysroot -fPIC -DANDROID -c ./talloc.c -o talloc.o
./talloc.c:33:10: fatal error: 'replace.h' file not found
#include "replace.h"
         ^~~~~~~~~~~
1 error generated.
Error: Process completed with exit code 1.
0s
